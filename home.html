<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Home</title>
</head>
<body>
    <center>
        <h2>Home</h2>
    </center>

    <!-- New nav bar settings -->
    <div class="navbar">
        <center>
            <button id="homeBtn" type="button" onclick="document.location='home.html'">Home</button>
            <button id="logoutBtn" type="button" onclick="document.location='index.html'">Log out</button>
            <button id="createEventBtn" type="button" onclick="document.location='createEvent.html'">Create New Event</button>
            <button id="registerRSOBtn" type="button" onclick="document.location='createRSO.html'">Register New Organization</button>
            <button id="createUniversityBtn" type="button" onclick="document.location='createUniversity.html'">Create University</button>
            <button id="viewRSOBtn" type="button" onclick="document.location='viewRSO.html'">View RSO</button>
        </center>
    </div>
    <script>
        const role = "admin"; // Replace with actual user role fetched from authentication
        const navbarBtns = document.querySelectorAll('.navbar button');
    
        if (role === "student") {
            navbarBtns.forEach(btn => {
                if (btn.id !== "homeBtn" && btn.id !== "logoutBtn" && btn.id !== "viewRSOBtn") {
                    btn.style.display = "none";
                }
            });
        } else if (role === "admin") {
            navbarBtns.forEach(btn => {
                btn.style.display = "vertical";
            });
        } else if (role === "superadmin") {
            navbarBtns.forEach(btn => {
                btn.style.display = "vertical";
            });
        }
    </script>
    
    <!-- Table for the events -->
    <center>
        <h3>Current Events</h3>
    </center>
    <table id="eventsTable">
        <thead>
            <tr>
                <th>Event Name</th>
                <th>Date</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody id="eventsTableBody">
            <!-- Table rows will be dynamically added here -->
        </tbody>
    </table>

    <script>
        // AJAX request to fetch events from the server
        function fetchEvents() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    // Update the table body with the fetched events
                    document.getElementById("eventsTableBody").innerHTML = this.responseText;
                }
            };
            xhttp.open("GET", "fetchEvents.php", true); // Replace "fetch_events.php" with the actual path to your PHP script
            xhttp.send();
        }

        // Call fetchEvents function when the page loads
        window.onload = function() {
            fetchEvents();
        };
    </script>
</body>
</html>
