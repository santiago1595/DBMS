<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Create a New Event</title>
</head>
<body>
<div class="navbar">
    <center>
        <button id="homeBtn" type="button" onclick="document.location='home.html'">Home</button>
        <button id="logoutBtn" type="button" onclick="document.location='index.html'">Log out</button>
        <button id="createEventBtn" type="button" onclick="document.location='createEvent.html'">Create New Event</button>
        <button id="registerRSOBtn" type="button" onclick="document.location='createRSO.html'">Register New Organization</button>
        <button id="createUniversityBtn" type="button" onclick="document.location='createUniversity.html'">Create University</button>
    </center>
</div>

<center>
    <h2>Create a New Event</h2>
    <div class="box1">
        <form id="eventForm" method="post">
            <label for="event_name">Enter event name:</label><br>
            <input type="text" id="event_name" name="event_name"><br><br>

            <label for="event_date">Enter event date:</label><br>
            <input type="text" id="event_date" name="event_date"><br><br>

            <label for="event_time">Enter event time:</label><br>
            <input type="text" id="event_time" name="event_time"><br><br>

            <label for="event_location">Enter location:</label><br>
            <input type="text" id="event_location" name="event_location"><br><br>

            <label for="latitude">Enter latitude:</label><br>
            <input type="text" id="latitude" name="latitude"><br><br>

            <label for="longitude">Enter longitude:</label><br>
            <input type="text" id="longitude" name="longitude"><br><br>


            <label for="eventDescription">Enter the description of the event:</label><br>
            <textarea id="eventDescription" name="eventDescription" style="width: 250px;"></textarea><br><br>

            <label for="eventType">Select event type:</label><br>
            <select id="eventType" name="eventType">
                <option value="Private">Private</option>
                <option value="Public">Public</option>
                <option value="RSO">RSO</option>
            </select><br><br>

            <input type="submit" value="Register">
        </form>
    </div>
</center>

<script>
    document.getElementById('eventForm').addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent form submission

        // Gather form data
        var formData = {
            event_name: document.getElementById('event_name').value,
            event_time: document.getElementById('event_time').value,
            event_date: document.getElementById('event_date').value,
            location_name: document.getElementById('event_location').value,
            latitude: document.getElementById('latitude').value,
            longitude: document.getElementById('longitude').value,
            event_description: document.getElementById('eventDescription').value,
            event_type: document.getElementById('eventType').value
        };

        // Send form data as JSON to your_php_script.php using fetch API
        fetch('createEvent.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData),
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(data => {
                console.log(data); // Log response from PHP script
                // Handle response here (e.g., redirect or show confirmation)
                // You can redirect the user to a confirmation page if needed
                window.location.href = 'home.html';
            })
            .catch((error) => {
                console.error('Error:', error);
                alert('This specific Error: ' + error); // Show error message
            });
    });
</script>
</body>
</html>
